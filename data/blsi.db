/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

# ------------------------------------------------------------
# SCHEMA DUMP FOR TABLE: algorithm
# ------------------------------------------------------------

CREATE TABLE IF NOT EXISTS `algorithm` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` text NOT NULL,
  `version_number` float(8, 2) DEFAULT NULL,
  `state_id_start` int(10) unsigned DEFAULT NULL,
  `description` text,
  `short_description` text,
  `date_modified` text,
  `date_created` text,
  PRIMARY KEY (`id`),
  UNIQUE KEY `id` (`id`)
) ENGINE = InnoDB AUTO_INCREMENT = 2 DEFAULT CHARSET = latin1;

# ------------------------------------------------------------
# SCHEMA DUMP FOR TABLE: key
# ------------------------------------------------------------

CREATE TABLE IF NOT EXISTS `key` (
  `id` smallint(6) NOT NULL AUTO_INCREMENT,
  `key` char(36) CHARACTER SET latin1 COLLATE latin1_bin NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `id` (`id`)
) ENGINE = InnoDB DEFAULT CHARSET = latin1;

# ------------------------------------------------------------
# SCHEMA DUMP FOR TABLE: question
# ------------------------------------------------------------

CREATE TABLE IF NOT EXISTS `question` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `algorithm_id` int(10) unsigned NOT NULL,
  `question` text NOT NULL,
  `prompt` text NOT NULL,
  `type_key` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `id` (`id`),
  KEY `algorithm_id` (`algorithm_id`),
  CONSTRAINT `question_ibfk_1` FOREIGN KEY (`algorithm_id`) REFERENCES `algorithm` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE = InnoDB AUTO_INCREMENT = 2 DEFAULT CHARSET = latin1;

# ------------------------------------------------------------
# SCHEMA DUMP FOR TABLE: question_option
# ------------------------------------------------------------

CREATE TABLE IF NOT EXISTS `question_option` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `question_id` int(10) unsigned NOT NULL,
  `label` varchar(255) DEFAULT NULL,
  `min_value` int(11) DEFAULT NULL,
  `max_value` int(11) DEFAULT NULL,
  `is_good` tinyint(1) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `id` (`id`),
  KEY `question_id` (`question_id`),
  CONSTRAINT `question_option_ibfk_1` FOREIGN KEY (`question_id`) REFERENCES `question` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE = InnoDB AUTO_INCREMENT = 2 DEFAULT CHARSET = latin1;

# ------------------------------------------------------------
# SCHEMA DUMP FOR TABLE: recommendation
# ------------------------------------------------------------

CREATE TABLE IF NOT EXISTS `recommendation` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `algorithm_id` int(10) unsigned NOT NULL,
  `title` text NOT NULL,
  `description` text,
  `short_description` text,
  PRIMARY KEY (`id`),
  UNIQUE KEY `id` (`id`),
  KEY `algorithm_id` (`algorithm_id`),
  CONSTRAINT `recommendation_ibfk_1` FOREIGN KEY (`algorithm_id`) REFERENCES `algorithm` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE = InnoDB AUTO_INCREMENT = 2 DEFAULT CHARSET = latin1;

# ------------------------------------------------------------
# SCHEMA DUMP FOR TABLE: release
# ------------------------------------------------------------

CREATE TABLE IF NOT EXISTS `release` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` text,
  `algorithm_id` int(10) unsigned NOT NULL,
  `version_number` float(8, 2) NOT NULL,
  `algorithm_json` text,
  `attribute_json` text,
  PRIMARY KEY (`algorithm_id`, `version_number`),
  UNIQUE KEY `id` (`id`),
  CONSTRAINT `release_ibfk_1` FOREIGN KEY (`algorithm_id`) REFERENCES `algorithm` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE = InnoDB AUTO_INCREMENT = 2 DEFAULT CHARSET = latin1;

# ------------------------------------------------------------
# SCHEMA DUMP FOR TABLE: state
# ------------------------------------------------------------

CREATE TABLE IF NOT EXISTS `state` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `algorithm_id` int(10) unsigned NOT NULL,
  `state_id_next_good` int(10) unsigned DEFAULT NULL,
  `state_id_next_bad` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `id` (`id`),
  KEY `algorithm_id` (`algorithm_id`),
  CONSTRAINT `state_ibfk_1` FOREIGN KEY (`algorithm_id`) REFERENCES `algorithm` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE = InnoDB AUTO_INCREMENT = 2 DEFAULT CHARSET = latin1;

# ------------------------------------------------------------
# SCHEMA DUMP FOR TABLE: state_question
# ------------------------------------------------------------

CREATE TABLE IF NOT EXISTS `state_question` (
  `state_id` int(10) unsigned NOT NULL,
  `question_id` int(10) unsigned NOT NULL,
  KEY `state_id` (`state_id`),
  CONSTRAINT `state_question_ibfk_1` FOREIGN KEY (`state_id`) REFERENCES `state` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE = InnoDB DEFAULT CHARSET = latin1;

# ------------------------------------------------------------
# SCHEMA DUMP FOR TABLE: state_recommendation
# ------------------------------------------------------------

CREATE TABLE IF NOT EXISTS `state_recommendation` (
  `state_id` int(10) unsigned NOT NULL,
  `recommendation_id` int(10) unsigned NOT NULL,
  KEY `state_id` (`state_id`),
  CONSTRAINT `state_recommendation_ibfk_1` FOREIGN KEY (`state_id`) REFERENCES `state` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE = InnoDB DEFAULT CHARSET = latin1;

# ------------------------------------------------------------
# DATA DUMP FOR TABLE: algorithm
# ------------------------------------------------------------

INSERT INTO
  `algorithm` (
    `id`,
    `name`,
    `version_number`,
    `state_id_start`,
    `description`,
    `short_description`,
    `date_modified`,
    `date_created`
  )
VALUES
  (
    1,
    'test',
    0.00,
    NULL,
    'this is a descript',
    NULL,
    'Fri Feb 15 2019',
    'Fri Feb 15 2019'
  );

# ------------------------------------------------------------
# DATA DUMP FOR TABLE: key
# ------------------------------------------------------------


# ------------------------------------------------------------
# DATA DUMP FOR TABLE: question
# ------------------------------------------------------------

INSERT INTO
  `question` (
    `id`,
    `algorithm_id`,
    `question`,
    `prompt`,
    `type_key`
  )
VALUES
  (1, 1, '', 'this is a prompt', NULL);

# ------------------------------------------------------------
# DATA DUMP FOR TABLE: question_option
# ------------------------------------------------------------

INSERT INTO
  `question_option` (
    `id`,
    `question_id`,
    `label`,
    `min_value`,
    `max_value`,
    `is_good`
  )
VALUES
  (1, 1, 'sddfgdfsd', NULL, NULL, NULL);

# ------------------------------------------------------------
# DATA DUMP FOR TABLE: recommendation
# ------------------------------------------------------------

INSERT INTO
  `recommendation` (
    `id`,
    `algorithm_id`,
    `title`,
    `description`,
    `short_description`
  )
VALUES
  (1, 1, 'this is a title', 'this is a descript', NULL);

# ------------------------------------------------------------
# DATA DUMP FOR TABLE: release
# ------------------------------------------------------------

INSERT INTO
  `release` (
    `id`,
    `name`,
    `algorithm_id`,
    `version_number`,
    `algorithm_json`,
    `attribute_json`
  )
VALUES
  (
    1,
    'test',
    1,
    0.00,
    '{\"id\":1,\"name\":\"test\",\"version_number\":0,\"state_id_start\":null,\"description\":\"this is a descript\",\"short_description\":null,\"date_modified\":\"Fri Feb 15 2019\",\"date_created\":\"Fri Feb 15 2019\"}',
    '{\"questions\":[{\"id\":1,\"algorithm_id\":1,\"question\":\"\",\"prompt\":\"this is a prompt\",\"type_key\":null,\"question_options\":[{\"id\":1,\"question_id\":1,\"label\":\"sddfgdfsd\",\"min_value\":null,\"max_value\":null,\"is_good\":null}]}],\"recommendations\":[{\"id\":1,\"algorithm_id\":1,\"title\":\"this is a title\",\"description\":\"this is a descript\",\"short_description\":null}],\"states\":[{\"id\":1,\"algorithm_id\":1,\"state_id_next_good\":3,\"state_id_next_bad\":3,\"question_ids\":[],\"recommendation_ids\":[]}]}'
  );

# ------------------------------------------------------------
# DATA DUMP FOR TABLE: state
# ------------------------------------------------------------

INSERT INTO
  `state` (
    `id`,
    `algorithm_id`,
    `state_id_next_good`,
    `state_id_next_bad`
  )
VALUES
  (1, 1, 3, 3);

# ------------------------------------------------------------
# DATA DUMP FOR TABLE: state_question
# ------------------------------------------------------------


# ------------------------------------------------------------
# DATA DUMP FOR TABLE: state_recommendation
# ------------------------------------------------------------


/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;
/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
